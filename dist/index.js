"use strict";var ce=Object.create;var N=Object.defineProperty;var le=Object.getOwnPropertyDescriptor;var de=Object.getOwnPropertyNames;var ue=Object.getPrototypeOf,pe=Object.prototype.hasOwnProperty;var l=(e,t)=>{for(var o in t)N(e,o,{get:t[o],enumerable:!0})},fe=(e,t,o,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of de(t))!pe.call(e,n)&&n!==o&&N(e,n,{get:()=>t[n],enumerable:!(a=le(t,n))||a.enumerable});return e};var M=(e,t,o)=>(o=e!=null?ce(ue(e)):{},fe(t||!e||!e.__esModule?N(o,"default",{value:e,enumerable:!0}):o,e));var se=require("discord-player"),x=require("discord.js"),ie=M(require("node-cron"));var U={};l(U,{data:()=>he,execute:()=>we});var u=require("@devraelfreeze/discordjs-pagination"),D=require("discord.js");var G=async e=>{try{return await(await fetch(`${process.env.URBAN_DICTIONARY_API_URL}${e}`)).json()}catch(t){throw console.error("Failed to fetch Notion page:",t),t}};function $(e,t){return e.length<=t?e:`${e.slice(0,t-3)}...`}var he=new D.SlashCommandBuilder().setName("urban_dictionary").setDescription("Reply with definition of the word").addStringOption(e=>e.setName("input").setDescription("Type your word").setRequired(!0).setAutocomplete(!0));async function we(e){let t=e.options.get("input");if(!t||t?.value?.toString().trim().length===0){await e.reply("Please provide a word to define.");return}try{let{list:o}=await G(t.value?.toString());if(o.length===0){await e.reply("No definition found.");return}let a=o.map((n,r)=>ye(n,t.value));await ge(e,a)}catch(o){console.error("Error fetching definition:",o),await be(e,"Failed to fetch the definition. Please try again later.")}}function ye(e,t){let o=new D.EmbedBuilder().setColor("#0099ff").setTitle(`Definition for "${t}"`).setDescription($(e.definition,4096));return e.example&&e.example.trim().length>0&&o.addFields({name:"Example",value:$(e.example,1024)}),e.author&&e.author.trim().length>0&&o.addFields({name:"Author",value:e.author}),o.setFooter({text:`\u{1F44D} ${e.thumbs_up} \u{1F44E} ${e.thumbs_down}`}),o}async function ge(e,t){let o=t.map(n=>n),a=e.user;await(0,u.pagination)({embeds:t,author:a,interaction:e,ephemeral:!1,time:4e4,disableButtons:o.length===1,buttons:[{type:u.ButtonTypes.previous,label:"Previous Page",style:u.ButtonStyles.Primary},{type:u.ButtonTypes.next,label:"Next Page",style:u.ButtonStyles.Primary}]})}async function be(e,t){!e.replied&&!e.deferred?await e.reply(t):await e.followUp(t)}var P={};l(P,{data:()=>xe,execute:()=>De});var v=require("discord.js");var O=require("@google/generative-ai"),Ce=new O.GoogleGenerativeAI("AIzaSyBRjyG_rm192CG_F8gR-ACZR03riYUMc-Q");async function _(e){try{return(await(await Ce.getGenerativeModel({model:"gemini-1.0-pro-latest"}).generateContentStream(e)).response).text()}catch(t){throw console.error("Error in getGemini:",t),new Error("Failed to generate content with Gemini model.")}}var xe=new v.SlashCommandBuilder().setName("asks").setDescription("Reply with gemini!").addStringOption(e=>e.setName("input").setDescription("Type your word").setRequired(!0).setAutocomplete(!0));async function De(e){let t=e.options.get("input");try{await e.deferReply(),e.channel?.sendTyping();let o=await e.fetchReply();await o.react("\u{1F914}");let a=await _(t?.value?.toString()),n="",r=20,y=5;for(let w=0;w<a.length;w+=r){n+=a.substring(w,w+r);let re=new v.EmbedBuilder().setColor("#0099ff").setTitle(`You asked for ${t?.value}`).setDescription(n).setTimestamp().setFooter({text:"Gemini replied",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"});await e.editReply({embeds:[re]}),await new Promise(me=>setTimeout(me,y))}"reactions"in o&&await o.reactions.resolve("\u{1F914}")?.users.remove(e.client.user?.id)}catch(o){console.error("Error fetching definition:",o),await e.reply("Failed to fetch the gemini. Please try again later.")}}var I={};l(I,{autocompleterun:()=>Ie,data:()=>ve,execute:()=>Se});var q=require("discord-player"),s=require("discord.js");var J=require("discord-player"),p=require("discord.js"),c=new p.Client({intents:[p.GatewayIntentBits.Guilds,p.GatewayIntentBits.GuildMessages,p.GatewayIntentBits.MessageContent,p.GatewayIntentBits.GuildMembers,p.GatewayIntentBits.GuildVoiceStates]}),f=new J.Player(c);var ve=new s.SlashCommandBuilder().setName("play").setDescription("Playing music from youtube").addStringOption(e=>e.setName("input").setDescription("Type your word").setRequired(!0).setAutocomplete(!0).addChoices());async function Ie(e){let t=e.options.getFocused();if(!t)return;let o=await f.search(t);return e.respond(o.tracks.slice(0,10).map(a=>{let n=`${a.title} - ${a.author} - ${a.duration}`;return{name:n.length>100?n.substring(0,97)+"...":n,value:a.url}}))}async function Se(e){if(!(e.member instanceof s.GuildMember)||!e.member.voice.channel){let a=new s.EmbedBuilder().setColor("#df4746").setURL("https://github.com/JoeJoeflyn").addFields({name:"You have to be connected in a voice channel before you can use this command !",value:`${(0,s.quote)((0,s.hyperlink)("How to join a voice channel ?","https://support.discord.com/hc/en-us/articles/360045138571-Beginner-s-Guide-to-Discord#h_9de92bc2-3bca-459f-8efd-e1e2739ca4f4"))}`});await e.reply({embeds:[a]});return}let t=e.member.voice.channel,o=e.options.get("input");await e.deferReply();try{if((0,q.useQueue)(e?.guild?.id)?.isPlaying()){let{track:n}=await f.play(t,o?.value,{nodeOptions:{metadata:e,leaveOnEnd:!1}}),r=new s.EmbedBuilder().setColor("#6aba54").setDescription(`Added ${(0,s.bold)((0,s.hyperlink)(`${n.author} - ${n.title}`,n.url))} - \`${n.duration.toString()}\``);await e.editReply({embeds:[r]})}else{let{track:n}=await f.play(t,o?.value,{nodeOptions:{metadata:e,leaveOnEnd:!1}}),r=new s.EmbedBuilder().setColor("#6aba54").setAuthor({name:"Now playing",url:"https://github.com/JoeJoeflyn"}).setThumbnail(n.thumbnail).setDescription(`${(0,s.bold)((0,s.hyperlink)(`${n.author} - ${n.title}`,n.url))} - \`${n.duration.toString()}\``).setTimestamp().setFooter({text:"Music Bot",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"}),y=new s.ActionRowBuilder().addComponents(new s.ButtonBuilder().setCustomId("skip").setEmoji("\u23E9").setStyle(s.ButtonStyle.Secondary),new s.ButtonBuilder().setCustomId("pause").setEmoji("\u25B6\uFE0F").setStyle(s.ButtonStyle.Secondary),new s.ButtonBuilder().setCustomId("stop").setEmoji("\u23F9\uFE0F").setStyle(s.ButtonStyle.Secondary));await e.editReply({embeds:[r],components:[y]})}}catch(a){return e.followUp(`Something went wrong: ${a}`)}}var S={};l(S,{data:()=>Te,execute:()=>Re});var Q=require("discord-player"),g=require("discord.js"),Te=new g.SlashCommandBuilder().setName("stop").setDescription("Disconnect the bot from voice channel");async function Re(e){let t=(0,Q.useQueue)(e?.guildId);if(!t?.isPlaying()){let o=new g.EmbedBuilder().setColor("#df4746").setDescription("I'm not playing music! Add a song with </play:1235922618230640664>.");await e.reply({embeds:[o]});return}try{t.delete();let o=new g.EmbedBuilder().setColor("#6aba54").setDescription("\u23F9 The player has been successfully stopped.");await e.reply({embeds:[o]})}catch(o){e.replied||e.deferred?await e.followUp(`Something went wrong: ${o}`):await e.reply(`Something went wrong: ${o}`)}}var R={};l(R,{data:()=>Be,execute:()=>ke});var T=require("discord-player"),i=require("discord.js"),Be=new i.SlashCommandBuilder().setName("skip").setDescription("Skip current song and start the next one.");async function ke(e){await e.deferReply();let t=(0,T.useQueue)(e?.guild?.id);t?.node.skip();let a=(0,T.useHistory)(e?.guild?.id)?.nextTrack;if(!t?.isPlaying()){let n=new i.EmbedBuilder().setColor("#df4746").setURL("https://github.com/JoeJoeflyn").setDescription("I'm not playing music ! Add song with </play:1235922618230640664>.");await e.editReply({embeds:[n]});return}try{if(t?.tracks.data.length===0){let n=new i.EmbedBuilder().setColor("#df4746").setDescription("There are no songs in the queue to skip.");await e.editReply({embeds:[n]})}else{let n=new i.EmbedBuilder().setColor("#6aba54").setAuthor({name:"Now playing",url:"https://github.com/JoeJoeflyn"}).setDescription(`${(0,i.bold)((0,i.hyperlink)(`${a.author} - ${a.title}`,a.url))} - \`${a.duration.toString()}\``).setTimestamp().setFooter({text:"Music Bot",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"}),r=new i.ActionRowBuilder().addComponents(new i.ButtonBuilder().setCustomId("skip").setEmoji("\u23E9").setStyle(i.ButtonStyle.Secondary),new i.ButtonBuilder().setCustomId("pause").setEmoji("\u25B6\uFE0F").setStyle(i.ButtonStyle.Secondary),new i.ButtonBuilder().setCustomId("stop").setEmoji("\u23F9\uFE0F").setStyle(i.ButtonStyle.Secondary));await e.editReply({embeds:[n],components:[r]})}}catch(n){await e.editReply(`Something went wrong: ${n}`)}}var B={};l(B,{data:()=>Ae,execute:()=>Ee});var Y=require("discord-player"),K=require("discord.js"),Ae=new K.SlashCommandBuilder().setName("pause").setDescription("Pause the current song.");async function Ee(e){let{pause:t}=(0,Y.useTimeline)(e?.guild?.id);try{t()}catch(o){await e.reply(`Something went wrong: ${o}`)}}var k={};l(k,{data:()=>Fe,execute:()=>Ne});var z=require("discord-player"),b=require("discord.js"),Fe=new b.SlashCommandBuilder().setName("shuffle").setDescription("Shuffle the current song.");async function Ne(e){let t=(0,z.useQueue)(e?.guild?.id);if(!t?.isPlaying()){let o=new b.EmbedBuilder().setColor("#df4746").setURL("https://github.com/JoeJoeflyn").setDescription("I'm not playing music ! Add song with </play:1235922618230640664>.");await e.reply({embeds:[o]})}try{t?.tracks.shuffle();let o=new b.EmbedBuilder().setColor("#6aba54").setURL("https://github.com/JoeJoeflyn").setDescription("\u2611\uFE0F Shuffled the queue");await e.editReply({embeds:[o]})}catch(o){await e.reply(`Something went wrong: ${o}`)}}var A={};l(A,{data:()=>$e,execute:()=>Ue});var H=require("discord-player"),W=require("discord.js"),$e=new W.SlashCommandBuilder().setName("resume").setDescription("Resume the current song.");async function Ue(e){let{resume:t}=(0,H.useTimeline)(e?.guild?.id);try{t()}catch(o){await e.reply(`Something went wrong: ${o}`)}}var L={};l(L,{data:()=>Pe,execute:()=>Le});var E=require("discord.js"),Pe=new E.SlashCommandBuilder().setName("ping").setDescription("Reply with Latency!");async function Le(e){if(!e.client){console.error("Client is not accessible");return}let t=Date.now()-e.createdTimestamp,o=Math.round(e.client.ws.ping),a=new E.EmbedBuilder().setColor("#0099ff").setTitle("\u{1F3D3} Pong!").addFields({name:"Latency",value:`${t}ms`,inline:!0},{name:"API Latency",value:`${o}ms`,inline:!0}).setTimestamp().setFooter({text:"Latency information",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"});await e.reply({embeds:[a]})}var j={};l(j,{data:()=>je,execute:()=>Me});var m=require("discord.js"),je=new m.SlashCommandBuilder().setName("help").setDescription("Show all useless bot commands").addStringOption(e=>e.setName("command").setDescription("Command name").setRequired(!1));async function Me(e){let t=e.options.get("command"),o=new m.EmbedBuilder().setColor("#947cea").setAuthor({name:"Useless Bot help menu (9) commands"}).addFields({name:"Bot (1)",value:"`ping`"},{name:"Dictionary (1)",value:"`urban_dictionary`"},{name:"Ai (1)",value:"`asks`"},{name:"Music (6)",value:"`play`, `pause`, `resume`, `shuffle`, `skip`, `stop`"}).setTimestamp().setFooter({text:"Do /help <command> to view how to use the command",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"});t?.value==="play"?o=new m.EmbedBuilder().setColor("#947cea").setAuthor({name:"Command </play:1235922618230640664>"}).addFields({name:"Description :",value:"`Play a song`"},{name:"Usage :",value:"`!play <song name or link or file>`"}).setTimestamp().setFooter({text:"Do /help <command> to view how to use the command",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"}):t?.value==="pause"?o=new m.EmbedBuilder().setColor("#947cea").setAuthor({name:"Command </pause:1236358751150407706>"}).addFields({name:"Description :",value:"`Pause music`"}).setTimestamp().setFooter({text:"Do /help <command> to view how to use the command",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"}):t?.value==="resume"?o=new m.EmbedBuilder().setColor("#947cea").setAuthor({name:"Command </resume:1236358751150407708>"}).addFields({name:"Description :",value:"`Resume the player`"},{name:"Aliases :",value:"`unpause`"}).setTimestamp().setFooter({text:"Do /help <command> to view how to use the command",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"}):t?.value==="shuffle"?o=new m.EmbedBuilder().setColor("#947cea").setAuthor({name:"Command </shuffle:1236358751150407707>"}).addFields({name:"Description :",value:"`Shuffle the queue`"}).setTimestamp().setFooter({text:"Do /help <command> to view how to use the command",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"}):t?.value==="skip"?o=new m.EmbedBuilder().setColor("#947cea").setAuthor({name:"Command </skip:1236358751150407705>"}).addFields({name:"Description :",value:"`Skip current song and start the next one`"},{name:"Aliases :",value:"`s`, `next`"}).setTimestamp().setFooter({text:"Do /help <command> to view how to use the command",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"}):t?.value==="stop"?o=new m.EmbedBuilder().setColor("#947cea").setAuthor({name:"Command </stop:1236358751150407704>"}).addFields({name:"Description :",value:"`Disconnect the bot from voice channel`"}).setTimestamp().setFooter({text:"Do /help <command> to view how to use the command",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"}):t?.value==="ping"?o=new m.EmbedBuilder().setColor("#947cea").setAuthor({name:"Command </ping:1236358751150407700>"}).addFields({name:"Description :",value:"`Reply with latency`"}).setTimestamp().setFooter({text:"Do /help <command> to view how to use the command",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"}):t?.value==="urban_dictionary"?o=new m.EmbedBuilder().setColor("#947cea").setAuthor({name:"Command </urban_dictionary:1236358751150407701>"}).addFields({name:"Description :",value:"`Reply with definition of the word`"}).setTimestamp().setFooter({text:"Do /help <command> to view how to use the command",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"}):t?.value==="asks"&&(o=new m.EmbedBuilder().setColor("#947cea").setAuthor({name:"Command </asks:1236358751150407702>"}).addFields({name:"Description :",value:"`Reply with gemini!`"}).setTimestamp().setFooter({text:"Do /help <command> to view how to use the command",iconURL:"https://i.pinimg.com/564x/b0/1a/2c/b01a2c6c066fb56f425030942a9f2c2b.jpg"})),await e.reply({embeds:[o]})}var d={ping:L,urban_dictionary:U,asks:P,play:I,stop:S,skip:R,pause:B,shuffle:k,resume:A,help:j};var V=M(require("dotenv"));V.default.config();var{DISCORD_TOKEN:Z,DISCORD_CLIENT_ID:X}=process.env;if(!Z||!X)throw new Error("Missing environment variables");var C={DISCORD_TOKEN:Z,DISCORD_CLIENT_ID:X};var F=require("discord.js");var Ge=Object.values(d).map(e=>e.data.toJSON()),Oe=new F.REST({version:"10"}).setToken(C.DISCORD_TOKEN);async function ee({guildId:e}){try{console.log("Started refreshing application (/) commands."),await Oe.put(F.Routes.applicationGuildCommands(C.DISCORD_CLIENT_ID,e),{body:Ge}),console.log("Successfully reloaded application (/) commands.")}catch(t){console.error(t)}}var ne=require("discord.js"),h=new Map,te=7,_e=5e3,oe=5*60*1e3;async function ae(e){if(!e.author.bot)if(h.has(e.author.id)){let t=h.get(e.author.id),{lastMessage:o,timer:a}=t,n=e.createdTimestamp-o.createdTimestamp,r=t.msgCount;if(n>_e)clearTimeout(a),t.msgCount=1,t.lastMessage=e,t.timer=setTimeout(()=>{h.delete(e.author.id)},oe),h.set(e.author.id,t);else if(++r,parseInt(r)===te){let y=new ne.EmbedBuilder().setColor("#df4746").setDescription("Warning: Spamming in this channel is forbidden.");await e.reply({embeds:[y]}),await e.channel.bulkDelete(te);let w=10*60*1e3;e.member&&await e.member.timeout(w,"Spamming messages")}else t.msgCount=r,h.set(e.author.id,t)}else{let t=setTimeout(()=>{h.delete(e.author.id)},oe);h.set(e.author.id,{msgCount:1,lastMessage:e,timer:t})}}f.extractors.loadDefault(e=>e!=="AppleMusicExtractor");f.events.on("playerFinish",e=>{let t=new x.EmbedBuilder().setColor("#f1af32").setTitle("Queue Concluded").setDescription("There are no more songs in the queue, you can add more with </play:1235922618230640664>.");e.metadata.channel.send({embeds:[t]})});f.events.on("emptyQueue",e=>{setTimeout(()=>{if(e?.tracks.data.length===0&&e.currentTrack===null){e?.connection?.disconnect();let t=new x.EmbedBuilder().setColor("#f1af32").setDescription("I left the voice channel due to inactivity.");e.metadata.channel.send({embeds:[t]})}},60*1e3*5)});c.on("error",console.error);c.on("warn",console.warn);c.once("ready",async()=>{console.log("Discord bot is ready! \u{1F916}"),ie.default.schedule("0 14 * * *",()=>{let e="540730246064898089",t=["Good morning! Wish you the best for a new day. \u{1F305}","Rise and shine! A new adventure awaits you. \u{1F680}","Good morning! Did you know? The Eiffel Tower can be 15 cm taller during the summer. \u{1F5FC}","Start your day with a smile and a positive thought. \u{1F60A}","Good morning! Remember, every day is a second chance. \u{1F308}"],o=t[Math.floor(Math.random()*t.length)];c.users.fetch(e).then(a=>{a.send(o)})})});c.on("guildCreate",async e=>{await ee({guildId:e.id})});c.on("guildMemberAdd",async e=>{let t=await e.guild.fetch();t.ownerId&&(await c.users.fetch(t.ownerId)).send(`${e.displayName} has joined the server!`)});c.on("messageCreate",async e=>{ae(e)});c.on("interactionCreate",async e=>{if(e.isButton()){let a=e.customId,n=(0,se.usePlayer)(e.guildId);switch(a){case"pause":n?.isPaused()?await d.resume.execute(e):await d.pause.execute(e);break;case"stop":await d.stop.execute(e);break;case"skip":await d.skip.execute(e);break;default:break}}if(e instanceof x.AutocompleteInteraction){e.commandName==="play"&&await d.play.autocompleterun(e);return}if(!e.isCommand())return;let{commandName:t}=e,o=d[t];if(!o){e.reply(`No command matching ${t} was found.`);return}try{e.deferred||e.replied||await o.execute(e)}catch(a){e.replied||(console.log(a),await e.reply("An error occurred while executing the command."))}});c.login(C.DISCORD_TOKEN).catch(console.error);
